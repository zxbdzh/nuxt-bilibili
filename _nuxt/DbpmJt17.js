import{c as L,m as C,a as M,t as T,b as w,u as H,d as B,_ as O,s as U,A as W}from"./BKt-3SG5.js";import{e as F,r as y,f as j,g as K,b as k,n as Q,u as q,h as E,c as N,o as S,a as c,w as A,i as z,j as x,t as I,F as D,k as G,l as J,_ as X}from"./rqcxleme.js";import{a as Y}from"./DpWou6RX.js";import"./BwQ70Ep4.js";var Z=(n,l,i)=>new Promise((u,v)=>{var h=a=>{try{f(i.next(a))}catch(m){v(m)}},r=a=>{try{f(i.throw(a))}catch(m){v(m)}},f=a=>a.done?u(a.value):Promise.resolve(a.value).then(h,r);f((i=i.apply(n,l)).next())});const ee={top:w(10),rows:w(4),duration:w(4e3),autoPlay:T,delay:M(300),modelValue:C()},[ae,R]=L("barrage");var te=F({name:ae,props:ee,emits:["update:modelValue"],setup(n,{emit:l,slots:i}){const u=y(),v=R("item"),h=y(0),r=[],f=(e,d=n.delay)=>{const s=document.createElement("span");return s.className=v,s.innerText=String(e),s.style.animationDuration=`${n.duration}ms`,s.style.animationDelay=`${d}ms`,s.style.animationName="van-barrage",s.style.animationTimingFunction="linear",s},a=y(!0),m=y(n.autoPlay),V=({id:e,text:d},s)=>{var o;const t=f(d,a.value?s*n.delay:void 0);!n.autoPlay&&m.value===!1&&(t.style.animationPlayState="paused"),(o=u.value)==null||o.append(t),h.value++;const g=(h.value-1)%+n.rows*t.offsetHeight+ +n.top;t.style.top=`${g}px`,t.dataset.id=String(e),r.push(t),t.addEventListener("animationend",()=>{l("update:modelValue",[...n.modelValue].filter(_=>String(_.id)!==t.dataset.id))})},P=(e,d)=>{const s=new Map(d.map(o=>[o.id,o]));e.forEach((o,t)=>{s.has(o.id)?s.delete(o.id):V(o,t)}),s.forEach(o=>{const t=r.findIndex(g=>g.dataset.id===String(o.id));t>-1&&(r[t].remove(),r.splice(t,1))}),a.value=!1};j(()=>n.modelValue.slice(),(e,d)=>P(e??[],d??[]),{deep:!0});const p=y({});return K(()=>Z(this,null,function*(){var e;p.value["--move-distance"]=`-${(e=u.value)==null?void 0:e.offsetWidth}px`,yield Q(),P(n.modelValue,[])})),H({play:()=>{m.value=!0,r.forEach(e=>{e.style.animationPlayState="running"})},pause:()=>{m.value=!1,r.forEach(e=>{e.style.animationPlayState="paused"})}}),()=>{var e;return k("div",{class:R(),ref:u,style:p.value},[(e=i.default)==null?void 0:e.call(i)])}}});const se=["poster"],oe={class:"info"},ne={class:"title-text"},le={class:"body"},ie={class:"author"},re=["src"],de={class:"name"},ce={class:"relate"},ue={class:"relate-list"},me=F({__name:"[id]",async setup(n){var V,P;let l,i;const u=y([{id:100,text:"轻量"},{id:101,text:"可定制的"},{id:102,text:"移动端"},{id:103,text:"Vue"},{id:104,text:"组件库"},{id:105,text:"VantUI"},{id:106,text:"666"}]),v=y(),h=()=>{var p;(p=v.value)==null||p.play()},r=()=>{var p;(p=v.value)==null||p.pause()},{params:f}=q(),{data:a}=([l,i]=E(()=>B(`/api/video/${f.id}`,"$EPKdBOeoD2")),l=await l,i(),l),{data:m}=([l,i]=E(()=>B("/api/video","$kOlAQVcPDe")),l=await l,i(),l);return Y({title:`${(V=a.value)==null?void 0:V.title}_哔哩哔哩
  bilibili_${(P=a.value)==null?void 0:P.author.name}`}),(p,b)=>{var o,t,g;const $=O,e=te,d=U,s=W;return S(),N(D,null,[k(d,null,{default:A(()=>[k($),k(e,{modelValue:x(u),"onUpdate:modelValue":b[0]||(b[0]=_=>z(u)?u.value=_:null),"auto-play":!1,ref_key:"barrageRef",ref:v},{default:A(()=>{var _;return[c("video",{controls:"",class:"video-play",ref:"videoRef",onPlay:h,onPause:r,poster:(_=x(a))==null?void 0:_.pic,src:"https://video.pearvideo.com/mp4/third/20230706/cont-1784445-12033417-151259-hd.mp4"},null,40,se)]}),_:1},8,["modelValue"])]),_:1}),c("div",oe,[c("h1",ne,I((o=x(a))==null?void 0:o.title),1),c("div",le,[c("div",ie,[c("img",{class:"avatar",src:(t=x(a))==null?void 0:t.author.face},null,8,re),c("span",de,I((g=x(a))==null?void 0:g.author.name),1)])])]),c("div",ce,[b[1]||(b[1]=c("h3",{class:"relate-title"},"相关推荐",-1)),c("div",ue,[(S(!0),N(D,null,G(x(m),_=>(S(),J(s,{key:_.aid,item:_},null,8,["item"]))),128))])])],64)}}}),ye=X(me,[["__scopeId","data-v-642035de"]]);export{ye as default};
